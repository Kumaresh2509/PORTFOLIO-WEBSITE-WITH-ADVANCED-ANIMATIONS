import { useEffect, useRef } from "react";
import gsap from "gsap";

export default function Portfolio() {
  const titleRef = useRef(null);
  const subtitleRef = useRef(null);
  const aboutRef = useRef(null);
  const aboutParagraphsRef = useRef([]);
  const projectsRef = useRef([]);
  const footerRef = useRef(null);

  useEffect(() => {
    gsap.fromTo(
      titleRef.current,
      { opacity: 0, y: 40 },
      { opacity: 1, y: 0, duration: 1.2, ease: "power3.out" }
    );
    gsap.fromTo(
      subtitleRef.current,
      { opacity: 0, y: 30 },
      { opacity: 1, y: 0, duration: 1.4, ease: "power3.out", delay: 0.4 }
    );

    gsap.fromTo(
      aboutParagraphsRef.current,
      { opacity: 0, y: 20 },
      {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power3.out",
        delay: 0.8,
        stagger: 0.3,
      }
    );

    gsap.fromTo(
      projectsRef.current,
      { opacity: 0, y: 30 },
      {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power3.out",
        stagger: 0.25,
        delay: 1.8,
      }
    );

    gsap.to(footerRef.current, {
      opacity: 0.7,
      duration: 2,
      repeat: -1,
      yoyo: true,
      ease: "sine.inOut",
    });
  }, []);

  return (
    <div className="min-h-screen relative overflow-hidden bg-gradient-to-br from-[#0f2027] via-[#203a43] to-[#2c5364] text-white p-8 font-sans">
      <div className="background-pattern"></div>

      <header className="text-center pt-20 relative z-10 animate-fade-in-up">
        <h1
          ref={titleRef}
          className="text-6xl font-extrabold mb-4 font-serif tracking-tight relative inline-block"
        >
          Hello, I'm Kumaresh
          <span className="underline-glow"></span>
        </h1>
        <p
          ref={subtitleRef}
          className="text-2xl text-gray-300 font-light italic"
        >
          Bachelor of Computer Application Student
        </p>
      </header>

      <section
        ref={aboutRef}
        className="group mt-16 text-center max-w-2xl mx-auto text-lg space-y-5 relative z-10 transition-all duration-500 transform hover:scale-105 hover:bg-white/10 hover:shadow-2xl hover:ring-2 hover:ring-white/30 p-6 rounded-xl animate-fade-in"
      >
        {[
          "I'm pursuing my Bachelor's in Computer Applications at Dr.N.G.P Arts and Science College.",
          "I completed my schooling at Gopal Naidu Higher Secondary School.",
          "Passionate about web development, UI/UX design, and exploring creative front-end technologies. I aim to build immersive and responsive web experiences.",
          "I have done a couple of projects, including:",
        ].map((text, i) => (
          <p
            key={i}
            ref={(el) => (aboutParagraphsRef.current[i] = el)}
            className={`transition-colors duration-300 group-hover:text-white ${
              i === 3 ? "text-left" : ""
            }`}
          >
            {text}
            {i === 3 && (
              <ul className="list-disc list-inside mt-2 space-y-1">
                <li className="transition-colors duration-300 group-hover:text-white">
                  Designed a professional coffee shop website UI/UX using Figma
                </li>
                <li className="transition-colors duration-300 group-hover:text-white">
                  Created a modern chat application UI/UX using Figma
                </li>
              </ul>
            )}
          </p>
        ))}
      </section>

      <section className="mt-20 grid grid-cols-1 md:grid-cols-2 gap-6 relative z-10">
        {[
          {
            title: "Coffee Shop Website UI/UX",
            desc: "A visually compelling and modern user interface designed in Figma for a coffee shop. Focused on accessibility, aesthetic appeal, and intuitive user journey mapping for a better customer experience.",
            link: "https://www.figma.com/design/35mkffH3YxNnHNaUxTKAnN/Untitled?node-id=0-1&p=f&t=GeCqwdxnyGE7TT6h-0",
          },
          {
            title: "Chat App UI/UX Design",
            desc: "An interactive messaging experience built in Figma, with clean layouts and thoughtful UX patterns for modern communication.",
            link: "https://www.figma.com/file/YzMnFxHFDIuXOWxf6j5NaX/Chat-App-UI?type=design&node-id=0%3A1&mode=design&t=0xkaMZMYziiCPdrW-1",
          },
        ].map((project, i) => (
          <div
            key={project.title}
            ref={(el) => (projectsRef.current[i] = el)}
            className="group bg-white/10 backdrop-blur p-6 rounded-2xl shadow-lg transform transition-all duration-500 hover:scale-105 hover:shadow-2xl hover:bg-white/20 hover:ring-2 hover:ring-white/30 animate-fade-in"
          >
            <div className="transition-transform duration-500 group-hover:scale-105">
              {project.link ? (
                <a
                  href={project.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="project-title text-xl font-semibold transition-colors duration-300 group-hover:text-green-300"
                >
                  {project.title}
                </a>
              ) : (
                <h2 className="text-xl font-semibold mb-2 project-title transition-colors duration-300 group-hover:text-green-300">
                  {project.title}
                </h2>
              )}
              {project.desc && (
                <p className="text-gray-300 transition-colors duration-300 group-hover:text-white">
                  {project.desc}
                </p>
              )}
            </div>
          </div>
        ))}
      </section>

      <footer
        ref={footerRef}
        className="mt-24 text-center text-gray-400 select-none relative z-10 animate-fade-in"
      >
        Â© 2025 Kumaresh Dev. All rights reserved.
      </footer>

      <style jsx>{`
        .background-pattern {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: repeating-linear-gradient(
              45deg,
              rgba(255, 255, 255, 0.05),
              rgba(255, 255, 255, 0.05) 1px,
              transparent 1px,
              transparent 20px
            ),
            repeating-linear-gradient(
              -45deg,
              rgba(255, 255, 255, 0.05),
              rgba(255, 255, 255, 0.05) 1px,
              transparent 1px,
              transparent 20px
            );
          pointer-events: none;
          z-index: 0;
          animation: subtleShift 20s linear infinite;
        }

        @keyframes subtleShift {
          0% {
            background-position: 0 0, 0 0;
          }
          100% {
            background-position: 40px 40px, 40px 40px;
          }
        }

        .underline-glow {
          position: absolute;
          bottom: -6px;
          left: 0;
          width: 100%;
          height: 4px;
          background: linear-gradient(
            270deg,
            #ff6ec4,
            #7873f5,
            #4ade80,
            #facc15,
            #ff6ec4
          );
          background-size: 1000% 1000%;
          border-radius: 4px;
          animation: glowAnim 10s ease infinite;
        }

        @keyframes glowAnim {
          0% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
          100% {
            background-position: 0% 50%;
          }
        }

        .project-title {
          position: relative;
          cursor: pointer;
          transition: color 0.3s ease;
          display: inline-block;
        }
        .project-title:hover {
          color: #4ade80;
          text-decoration: underline;
          text-underline-offset: 4px;
        }

        .animate-fade-in-up {
          animation: fadeInUp 1.2s ease both;
        }
        .animate-fade-in {
          animation: fadeIn 1.4s ease both;
        }

        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
      `}</style>
    </div>
  );
}
